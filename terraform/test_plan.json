{"format_version":"1.2","terraform_version":"1.13.0","variables":{"additional_tags":{"value":{"CostCenter":"development","Environment":"test","Purpose":"automated-testing"}},"alb_access_logs_bucket":{"value":""},"allowed_http_cidrs":{"value":["0.0.0.0/0"]},"application":{"value":"web-server"},"availability_zones":{"value":["us-east-1a","us-east-1b"]},"aws_region":{"value":"us-east-1"},"az_count":{"value":2},"backup_retention_days":{"value":7},"budget_alert_emails":{"value":["shublaisengwa@gmail.com"]},"budget_limit":{"value":25},"cidr_block":{"value":"10.0.0.0/16"},"cloudwatch_billing_threshold":{"value":80},"cloudwatch_log_retention_days":{"value":14},"cost_anomaly_threshold":{"value":20},"cost_center":{"value":"development"},"create_alb":{"value":true},"create_instances":{"value":true},"create_patch_baseline":{"value":true},"create_vpc":{"value":true},"create_waf":{"value":true},"enable_alb_access_logs":{"value":true},"enable_alb_deletion_protection":{"value":false},"enable_cloudwatch_billing_alarms":{"value":true},"enable_cost_anomaly_detection":{"value":false},"enable_cost_monitoring":{"value":true},"enable_detailed_monitoring":{"value":false},"enable_enhanced_monitoring":{"value":false},"enable_preview":{"value":false},"enable_sns_cost_alerts":{"value":false},"env":{"value":"test"},"instance_count":{"value":1},"instance_type":{"value":"t3.micro"},"kms_key_id":{"value":null},"log_retention_days":{"value":7},"monthly_budget_limit":{"value":100},"owner":{"value":"devops-team"},"patch_schedule":{"value":"cron(0 2 ? * SUN *)"},"project_name":{"value":"webserverdeployment"},"sns_email_endpoints":{"value":[]},"ssl_certificate_arn":{"value":""},"vpc_cidr":{"value":"10.0.0.0/16"},"waf_rate_limit":{"value":2000}},"planned_values":{"outputs":{"alb_arn":{"sensitive":false},"alb_dns_name":{"sensitive":false},"alb_security_group_id":{"sensitive":false},"alb_zone_id":{"sensitive":false},"application_health_check_url":{"sensitive":false},"application_url":{"sensitive":false},"aws_region":{"sensitive":false,"type":"string","value":"us-east-1"},"budget_name":{"sensitive":false,"type":"string","value":"webserverdeployment-test-monthly-budget"},"cloudwatch_alarms":{"sensitive":false,"type":["tuple",["string","string","string","string","string"]],"value":["webserverdeployment-test-ec2-status-check-failed-1","webserverdeployment-test-ec2-high-cpu-1","webserverdeployment-test-alb-5xx-errors","webserverdeployment-test-alb-unhealthy-targets","webserverdeployment-test-patch-compliance-failure"]},"cloudwatch_dashboard_url":{"sensitive":false,"type":"string","value":"https://us-east-1.console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=webserverdeployment-test-infrastructure"},"cost_alerts_topic_arn":{"sensitive":false,"type":"dynamic","value":null},"cost_monitoring_enabled":{"sensitive":false,"type":"bool","value":true},"deployment_summary":{"sensitive":false},"ec2_security_group_id":{"sensitive":false},"environment":{"sensitive":false,"type":"string","value":"test"},"instance_ids":{"sensitive":false},"instance_private_ips":{"sensitive":false},"monthly_budget_limit":{"sensitive":false,"type":"number","value":100},"patch_baseline_id":{"sensitive":false},"patch_group_name":{"sensitive":false,"type":"string","value":"webserverdeployment-test"},"patch_logs_bucket":{"sensitive":false},"private_subnet_ids":{"sensitive":false},"project_name":{"sensitive":false,"type":"string","value":"webserverdeployment"},"public_subnet_ids":{"sensitive":false},"sns_topic_arn":{"sensitive":false},"vpc_cidr_block":{"sensitive":false,"type":"string","value":"10.0.0.0/16"},"vpc_id":{"sensitive":false},"waf_web_acl_arn":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_budgets_budget.monthly_cost_budget[0]","mode":"managed","type":"aws_budgets_budget","name":"monthly_cost_budget","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_adjust_data":[],"budget_type":"COST","cost_filter":[{"name":"Service","values":["Amazon Elastic Compute Cloud - Compute"]}],"limit_amount":"100","limit_unit":"USD","name":"webserverdeployment-test-monthly-budget","notification":[{"comparison_operator":"GREATER_THAN","notification_type":"ACTUAL","subscriber_email_addresses":["shublaisengwa@gmail.com"],"subscriber_sns_topic_arns":[],"threshold":100,"threshold_type":"PERCENTAGE"},{"comparison_operator":"GREATER_THAN","notification_type":"ACTUAL","subscriber_email_addresses":["shublaisengwa@gmail.com"],"subscriber_sns_topic_arns":[],"threshold":80,"threshold_type":"PERCENTAGE"},{"comparison_operator":"GREATER_THAN","notification_type":"FORECASTED","subscriber_email_addresses":["shublaisengwa@gmail.com"],"subscriber_sns_topic_arns":[],"threshold":120,"threshold_type":"PERCENTAGE"}],"planned_limit":[],"time_period_end":"2087-06-15_00:00","time_period_start":"2025-08-01_00:00","time_unit":"MONTHLY"},"sensitive_values":{"auto_adjust_data":[],"cost_filter":[{"values":[false]}],"cost_types":[],"notification":[{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]},{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]},{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]}],"planned_limit":[],"tags":{},"tags_all":{}}},{"address":"aws_cloudwatch_dashboard.infrastructure","mode":"managed","type":"aws_cloudwatch_dashboard","name":"infrastructure","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dashboard_name":"webserverdeployment-test-infrastructure"},"sensitive_values":{}},{"address":"aws_cloudwatch_log_group.waf_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"waf_log_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"/aws/wafv2/webserverdeployment-test","retention_in_days":14,"skip_destroy":false},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_cloudwatch_metric_alarm.alb_5xx_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"alb_5xx_errors","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":"This metric monitors ALB 5xx error count","alarm_name":"webserverdeployment-test-alb-5xx-errors","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"HTTPCode_ELB_5XX_Count","metric_query":[],"namespace":"AWS/ApplicationELB","period":300,"statistic":"Sum","threshold":5,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"aws_cloudwatch_metric_alarm.alb_unhealthy_targets","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"alb_unhealthy_targets","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":"This metric monitors ALB unhealthy target count","alarm_name":"webserverdeployment-test-alb-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","period":60,"statistic":"Average","threshold":0,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"aws_cloudwatch_metric_alarm.ec2_high_cpu[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"ec2_high_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_name":"webserverdeployment-test-ec2-high-cpu-1","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","period":300,"statistic":"Average","threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"aws_cloudwatch_metric_alarm.ec2_status_check_failed[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"ec2_status_check_failed","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_name":"webserverdeployment-test-ec2-status-check-failed-1","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"StatusCheckFailed","metric_query":[],"namespace":"AWS/EC2","period":60,"statistic":"Maximum","threshold":0,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"aws_cloudwatch_metric_alarm.estimated_charges[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"estimated_charges","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"This metric monitors estimated charges for webserverdeployment test","alarm_name":"webserverdeployment-test-estimated-charges","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"Currency":"USD"},"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"EstimatedCharges","metric_query":[],"namespace":"AWS/Billing","ok_actions":null,"period":86400,"statistic":"Maximum","threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}}},{"address":"aws_cloudwatch_metric_alarm.patch_compliance_failure","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"patch_compliance_failure","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":"This metric monitors patch compliance failures","alarm_name":"webserverdeployment-test-patch-compliance-failure","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"ComplianceType":"Patch","PatchGroup":"webserverdeployment-test"},"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"ComplianceByPatchGroup","metric_query":[],"namespace":"AWS/SSM-PatchManager","period":300,"statistic":"Average","threshold":0,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_eip.nat[1]","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_instance_profile.ec2_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_profile","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name_prefix":"webserverdeployment-test-ec2-profile-","path":"/"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_policy.ec2_cloudwatch_custom","mode":"managed","type":"aws_iam_policy","name":"ec2_cloudwatch_custom","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Custom CloudWatch permissions for EC2 instances","name_prefix":"webserverdeployment-test-ec2-cloudwatch-","path":"/","policy":"{\"Statement\":[{\"Action\":[\"cloudwatch:PutMetricData\",\"ec2:DescribeVolumes\",\"ec2:DescribeTags\",\"logs:PutLogEvents\",\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:DescribeLogStreams\",\"logs:DescribeLogGroups\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_role.ec2_role","mode":"managed","type":"aws_iam_role","name":"ec2_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name_prefix":"webserverdeployment-test-ec2-role-","path":"/","permissions_boundary":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"aws_iam_role_policy.ssm_patch_management","mode":"managed","type":"aws_iam_role_policy","name":"ssm_patch_management","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"webserverdeployment-test-ssm-patch-management"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.ec2_cloudwatch_agent_server_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_cloudwatch_agent_server_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.ec2_cloudwatch_custom","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_cloudwatch_custom","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.ec2_ssm_managed_instance_core","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_ssm_managed_instance_core","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"sensitive_values":{}},{"address":"aws_instance.main[0]","mode":"managed","type":"aws_instance","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-0a19bcec6d2ec60fb","credit_specification":[],"ebs_optimized":true,"get_password_data":false,"hibernation":null,"instance_type":"t3.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"required","instance_metadata_tags":"enabled"}],"monitoring":false,"root_block_device":[{"delete_on_termination":true,"encrypted":true,"volume_size":20,"volume_type":"gp3"}],"source_dest_check":true,"timeouts":null,"user_data":"005ea10295095e7dd99da89e0d5dce71e7435c15","user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_internet_gateway.main[0]","mode":"managed","type":"aws_internet_gateway","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_kms_alias.waf_logs","mode":"managed","type":"aws_kms_alias","name":"waf_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"alias/webserverdeployment-test-waf-logs"},"sensitive_values":{}},{"address":"aws_kms_key.waf_logs","mode":"managed","type":"aws_kms_key","name":"waf_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS key for WAF log encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::948572562675:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey*\",\"kms:DescribeKey\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"logs.us-east-1.amazonaws.com\"},\"Resource\":\"*\",\"Sid\":\"Allow CloudWatch Logs\"}],\"Version\":\"2012-10-17\"}","timeouts":null,"xks_key_id":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_lb.main[0]","mode":"managed","type":"aws_lb","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[{"enabled":true,"prefix":"webserverdeployment-test-alb"}],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":true,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"webserverdeployment-test-alb","preserve_host_header":false,"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[{}],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}},{"address":"aws_lb_listener.http[0]","mode":"managed","type":"aws_lb_listener","name":"http","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"port":80,"protocol":"HTTP","timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags":{},"tags_all":{}}},{"address":"aws_lb_target_group.main[0]","mode":"managed","type":"aws_lb_target_group","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"webserverdeployment-test-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"target_type":"instance"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}},{"address":"aws_lb_target_group_attachment.main[0]","mode":"managed","type":"aws_lb_target_group_attachment","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"port":80},"sensitive_values":{}},{"address":"aws_nat_gateway.main[0]","mode":"managed","type":"aws_nat_gateway","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"aws_nat_gateway.main[1]","mode":"managed","type":"aws_nat_gateway","name":"main","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_s3_bucket.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":true,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket.patch_logs","mode":"managed","type":"aws_s3_bucket","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":false,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket_lifecycle_configuration.patch_logs","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":7}],"expiration":[{"date":null,"days":120,"expired_object_delete_marker":false}],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"patch_logs_lifecycle","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":30,"storage_class":"STANDARD_IA"},{"date":null,"days":90,"storage_class":"GLACIER"}]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"sensitive_values":{"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[{},{}]}]}},{"address":"aws_s3_bucket_policy.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_policy","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_s3_bucket_public_access_block.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"aws_s3_bucket_public_access_block.patch_logs","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"aws_s3_bucket_server_side_encryption_configuration.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"aws_s3_bucket_server_side_encryption_configuration.patch_logs","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":true}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"aws_s3_bucket_versioning.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_versioning","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}},{"address":"aws_s3_bucket_versioning.patch_logs","mode":"managed","type":"aws_s3_bucket_versioning","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for Application Load Balancer - allows HTTP/HTTPS traffic from specified CIDRs","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic to internet","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP access from allowed CIDRs only","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS access from allowed CIDRs only","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name_prefix":"webserverdeployment-test-alb-","revoke_rules_on_delete":false,"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"aws_security_group.ec2","mode":"managed","type":"aws_security_group","name":"ec2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for EC2 instances - allows traffic from ALB and VPC endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic for updates and AWS services","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"HTTPS for VPC endpoints and AWS services communication","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":[],"description":"HTTP traffic from Application Load Balancer only","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":80}],"name_prefix":"webserverdeployment-test-ec2-","revoke_rules_on_delete":false,"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"aws_security_group.vpc_endpoints[0]","mode":"managed","type":"aws_security_group","name":"vpc_endpoints","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for VPC endpoints - allows HTTPS traffic from VPC CIDR","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic for AWS service responses","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"HTTPS traffic from VPC CIDR for AWS service communication","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name_prefix":"webserverdeployment-test-vpc-endpoints-","revoke_rules_on_delete":false,"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"aws_sns_topic.infrastructure_alerts","mode":"managed","type":"aws_sns_topic","name":"infrastructure_alerts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"webserverdeployment-test-infrastructure-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_sns_topic_policy.infrastructure_alerts","mode":"managed","type":"aws_sns_topic_policy","name":"infrastructure_alerts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_ssm_association.patch_compliance_scan","mode":"managed","type":"aws_ssm_association","name":"patch_compliance_scan","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"apply_only_at_cron_interval":false,"association_name":"webserverdeployment-test-patch-compliance-scan","automation_target_parameter_name":null,"compliance_severity":"MEDIUM","instance_id":null,"max_concurrency":null,"max_errors":null,"name":"AWS-RunPatchBaseline","output_location":[{"s3_key_prefix":"compliance-scans/test/","s3_region":null}],"parameters":{"Operation":"Scan"},"schedule_expression":"cron(0 6 ? * MON *)","sync_compliance":null,"targets":[{"key":"tag:PatchGroup","values":["webserverdeployment-test"]}],"wait_for_success_timeout_seconds":null},"sensitive_values":{"output_location":[{}],"parameters":{},"tags":{},"tags_all":{},"targets":[{"values":[false]}]}},{"address":"aws_ssm_association.patch_deployment","mode":"managed","type":"aws_ssm_association","name":"patch_deployment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"apply_only_at_cron_interval":false,"association_name":"webserverdeployment-test-patch-deployment","automation_target_parameter_name":null,"compliance_severity":"CRITICAL","instance_id":null,"max_concurrency":null,"max_errors":null,"name":"AWS-RunPatchBaseline","output_location":[{"s3_key_prefix":"patch-logs/test/","s3_region":null}],"parameters":{"Operation":"Install","RebootOption":"RebootIfNeeded"},"schedule_expression":"cron(0 2 ? * SUN *)","sync_compliance":null,"targets":[{"key":"tag:PatchGroup","values":["webserverdeployment-test"]}],"wait_for_success_timeout_seconds":null},"sensitive_values":{"output_location":[{}],"parameters":{},"tags":{},"tags_all":{},"targets":[{"values":[false]}]}},{"address":"aws_ssm_patch_baseline.amazon_linux[0]","mode":"managed","type":"aws_ssm_patch_baseline","name":"amazon_linux","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"approval_rule":[{"approve_after_days":0,"approve_until_date":null,"compliance_level":"CRITICAL","enable_non_security":false,"patch_filter":[{"key":"CLASSIFICATION","values":["Security","Bugfix"]},{"key":"SEVERITY","values":["Critical","Important"]}]},{"approve_after_days":7,"approve_until_date":null,"compliance_level":"MEDIUM","enable_non_security":true,"patch_filter":[{"key":"CLASSIFICATION","values":["Bugfix","Enhancement","Recommended"]},{"key":"SEVERITY","values":["Medium","Low"]}]}],"approved_patches":null,"approved_patches_compliance_level":"UNSPECIFIED","approved_patches_enable_non_security":null,"description":"Patch baseline for Amazon Linux 2023 systems in test environment","global_filter":[],"name":"webserverdeployment-test-amazon-linux-baseline","operating_system":"AMAZON_LINUX_2023","rejected_patches":null,"rejected_patches_action":"BLOCK","source":[]},"sensitive_values":{"approval_rule":[{"patch_filter":[{"values":[false,false]},{"values":[false,false]}]},{"patch_filter":[{"values":[false,false,false]},{"values":[false,false]}]}],"global_filter":[],"source":[],"tags":{},"tags_all":{}}},{"address":"aws_ssm_patch_group.main[0]","mode":"managed","type":"aws_ssm_patch_group","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"patch_group":"webserverdeployment-test"},"sensitive_values":{}},{"address":"aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.100.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_vpc.main[0]","mode":"managed","type":"aws_vpc","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.ec2messages[0]","mode":"managed","type":"aws_vpc_endpoint","name":"ec2messages","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"policy":"{\"Statement\":[{\"Action\":[\"ec2messages:AcknowledgeMessage\",\"ec2messages:DeleteMessage\",\"ec2messages:FailMessage\",\"ec2messages:GetEndpoint\",\"ec2messages:GetMessages\",\"ec2messages:SendReply\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ec2messages","service_network_arn":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.ssm[0]","mode":"managed","type":"aws_vpc_endpoint","name":"ssm","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"policy":"{\"Statement\":[{\"Action\":[\"ssm:UpdateInstanceInformation\",\"ssm:SendCommand\",\"ssm:ListCommandInvocations\",\"ssm:DescribeInstanceInformation\",\"ssm:GetDeployablePatchSnapshotForInstance\",\"ssm:GetDefaultPatchBaseline\",\"ssm:GetPatchBaseline\",\"ssm:DescribePatchBaselines\",\"ssm:DescribePatchGroups\",\"ssm:DescribeInstancePatchStates\",\"ssm:DescribeInstancePatches\",\"ssm:DescribePatchProperties\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssm","service_network_arn":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.ssmmessages[0]","mode":"managed","type":"aws_vpc_endpoint","name":"ssmmessages","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"policy":"{\"Statement\":[{\"Action\":[\"ssmmessages:CreateControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:OpenDataChannel\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssmmessages","service_network_arn":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_wafv2_web_acl.main[0]","mode":"managed","type":"aws_wafv2_web_acl","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":null,"name":"webserverdeployment-test-web-acl","rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"challenge_config":[],"name":"RateLimitRule","override_action":[],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"aggregate_key_type":"IP","custom_key":[],"evaluation_window_sec":300,"forwarded_ip_config":[],"limit":2000,"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"RateLimitRule","sampled_requests_enabled":true}]},{"action":[],"captcha_config":[],"challenge_config":[],"name":"AWSManagedRulesCommonRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":2,"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesCommonRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"CommonRuleSetMetric","sampled_requests_enabled":true}]}],"rule_json":null,"scope":"REGIONAL","token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"webserverdeployment-test-web-acl","sampled_requests_enabled":true}]},"sensitive_values":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"challenge_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"custom_key":[],"forwarded_ip_config":[],"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"challenge_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}},{"address":"aws_wafv2_web_acl_association.main[0]","mode":"managed","type":"aws_wafv2_web_acl_association","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"aws_wafv2_web_acl_logging_configuration.main[0]","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"logging_filter":[],"redacted_fields":[]},"sensitive_values":{"log_destination_configs":[],"logging_filter":[],"redacted_fields":[]}},{"address":"random_id.bucket_suffix","mode":"managed","type":"random_id","name":"bucket_suffix","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"byte_length":4,"keepers":null,"prefix":null},"sensitive_values":{}}]}},"resource_changes":[{"address":"aws_budgets_budget.monthly_cost_budget[0]","mode":"managed","type":"aws_budgets_budget","name":"monthly_cost_budget","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_adjust_data":[],"budget_type":"COST","cost_filter":[{"name":"Service","values":["Amazon Elastic Compute Cloud - Compute"]}],"limit_amount":"100","limit_unit":"USD","name":"webserverdeployment-test-monthly-budget","notification":[{"comparison_operator":"GREATER_THAN","notification_type":"ACTUAL","subscriber_email_addresses":["shublaisengwa@gmail.com"],"subscriber_sns_topic_arns":[],"threshold":100,"threshold_type":"PERCENTAGE"},{"comparison_operator":"GREATER_THAN","notification_type":"ACTUAL","subscriber_email_addresses":["shublaisengwa@gmail.com"],"subscriber_sns_topic_arns":[],"threshold":80,"threshold_type":"PERCENTAGE"},{"comparison_operator":"GREATER_THAN","notification_type":"FORECASTED","subscriber_email_addresses":["shublaisengwa@gmail.com"],"subscriber_sns_topic_arns":[],"threshold":120,"threshold_type":"PERCENTAGE"}],"planned_limit":[],"time_period_end":"2087-06-15_00:00","time_period_start":"2025-08-01_00:00","time_unit":"MONTHLY"},"after_unknown":{"account_id":true,"arn":true,"auto_adjust_data":[],"cost_filter":[{"values":[false]}],"cost_types":true,"id":true,"name_prefix":true,"notification":[{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]},{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]},{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]}],"planned_limit":[],"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"auto_adjust_data":[],"cost_filter":[{"values":[false]}],"cost_types":[],"notification":[{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]},{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]},{"subscriber_email_addresses":[false],"subscriber_sns_topic_arns":[]}],"planned_limit":[],"tags":{},"tags_all":{}}}},{"address":"aws_cloudwatch_dashboard.infrastructure","mode":"managed","type":"aws_cloudwatch_dashboard","name":"infrastructure","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"dashboard_name":"webserverdeployment-test-infrastructure"},"after_unknown":{"dashboard_arn":true,"dashboard_body":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_cloudwatch_log_group.waf_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"waf_log_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"/aws/wafv2/webserverdeployment-test","retention_in_days":14,"skip_destroy":false},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"log_group_class":true,"name_prefix":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_cloudwatch_metric_alarm.alb_5xx_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"alb_5xx_errors","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":"This metric monitors ALB 5xx error count","alarm_name":"webserverdeployment-test-alb-5xx-errors","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"HTTPCode_ELB_5XX_Count","metric_query":[],"namespace":"AWS/ApplicationELB","period":300,"statistic":"Sum","threshold":5,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"aws_cloudwatch_metric_alarm.alb_unhealthy_targets","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"alb_unhealthy_targets","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":"This metric monitors ALB unhealthy target count","alarm_name":"webserverdeployment-test-alb-unhealthy-targets","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"UnHealthyHostCount","metric_query":[],"namespace":"AWS/ApplicationELB","period":60,"statistic":"Average","threshold":0,"threshold_metric_id":null,"treat_missing_data":"notBreaching","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"aws_cloudwatch_metric_alarm.ec2_high_cpu[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"ec2_high_cpu","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_name":"webserverdeployment-test-ec2-high-cpu-1","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/EC2","period":300,"statistic":"Average","threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"alarm_description":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"aws_cloudwatch_metric_alarm.ec2_status_check_failed[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"ec2_status_check_failed","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_name":"webserverdeployment-test-ec2-status-check-failed-1","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"StatusCheckFailed","metric_query":[],"namespace":"AWS/EC2","period":60,"statistic":"Maximum","threshold":0,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"alarm_description":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"aws_cloudwatch_metric_alarm.estimated_charges[0]","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"estimated_charges","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_actions":null,"alarm_description":"This metric monitors estimated charges for webserverdeployment test","alarm_name":"webserverdeployment-test-estimated-charges","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"Currency":"USD"},"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"EstimatedCharges","metric_query":[],"namespace":"AWS/Billing","ok_actions":null,"period":86400,"statistic":"Maximum","threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"arn":true,"dimensions":{},"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"dimensions":{},"metric_query":[],"tags":{},"tags_all":{}}}},{"address":"aws_cloudwatch_metric_alarm.patch_compliance_failure","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"patch_compliance_failure","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":"This metric monitors patch compliance failures","alarm_name":"webserverdeployment-test-patch-compliance-failure","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"dimensions":{"ComplianceType":"Patch","PatchGroup":"webserverdeployment-test"},"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"ComplianceByPatchGroup","metric_query":[],"namespace":"AWS/SSM-PatchManager","period":300,"statistic":"Average","threshold":0,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":{},"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"aws_eip.nat[0]","mode":"managed","type":"aws_eip","name":"nat","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":true,"tags_all":true,"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_eip.nat[1]","mode":"managed","type":"aws_eip","name":"nat","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":true,"tags_all":true,"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_instance_profile.ec2_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_profile","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name_prefix":"webserverdeployment-test-ec2-profile-","path":"/"},"after_unknown":{"arn":true,"create_date":true,"id":true,"name":true,"role":true,"tags":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_policy.ec2_cloudwatch_custom","mode":"managed","type":"aws_iam_policy","name":"ec2_cloudwatch_custom","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Custom CloudWatch permissions for EC2 instances","name_prefix":"webserverdeployment-test-ec2-cloudwatch-","path":"/","policy":"{\"Statement\":[{\"Action\":[\"cloudwatch:PutMetricData\",\"ec2:DescribeVolumes\",\"ec2:DescribeTags\",\"logs:PutLogEvents\",\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:DescribeLogStreams\",\"logs:DescribeLogGroups\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}"},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name":true,"policy_id":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_role.ec2_role","mode":"managed","type":"aws_iam_role","name":"ec2_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name_prefix":"webserverdeployment-test-ec2-role-","path":"/","permissions_boundary":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"tags":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"aws_iam_role_policy.ssm_patch_management","mode":"managed","type":"aws_iam_role_policy","name":"ssm_patch_management","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"webserverdeployment-test-ssm-patch-management"},"after_unknown":{"id":true,"name_prefix":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.ec2_cloudwatch_agent_server_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_cloudwatch_agent_server_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.ec2_cloudwatch_custom","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_cloudwatch_custom","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"policy_arn":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.ec2_ssm_managed_instance_core","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_ssm_managed_instance_core","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_instance.main[0]","mode":"managed","type":"aws_instance","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-0a19bcec6d2ec60fb","credit_specification":[],"ebs_optimized":true,"get_password_data":false,"hibernation":null,"instance_type":"t3.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_protocol_ipv6":"disabled","http_put_response_hop_limit":1,"http_tokens":"required","instance_metadata_tags":"enabled"}],"monitoring":false,"root_block_device":[{"delete_on_termination":true,"encrypted":true,"volume_size":20,"volume_type":"gp3"}],"source_dest_check":true,"timeouts":null,"user_data":"005ea10295095e7dd99da89e0d5dce71e7435c15","user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"associate_public_ip_address":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_options":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"enable_primary_ipv6":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"host_resource_group_arn":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_lifecycle":true,"instance_market_options":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":[{}],"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":[{"device_name":true,"iops":true,"kms_key_id":true,"tags":true,"tags_all":true,"throughput":true,"volume_id":true}],"secondary_private_ips":true,"security_groups":true,"spot_instance_request_id":true,"subnet_id":true,"tags":true,"tags_all":true,"tenancy":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"instance_market_options":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[],"root_block_device":[{"tags":{},"tags_all":{}}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_internet_gateway.main[0]","mode":"managed","type":"aws_internet_gateway","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_kms_alias.waf_logs","mode":"managed","type":"aws_kms_alias","name":"waf_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"alias/webserverdeployment-test-waf-logs"},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"target_key_arn":true,"target_key_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_kms_key.waf_logs","mode":"managed","type":"aws_kms_key","name":"waf_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS key for WAF log encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::948572562675:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey*\",\"kms:DescribeKey\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"logs.us-east-1.amazonaws.com\"},\"Resource\":\"*\",\"Sid\":\"Allow CloudWatch Logs\"}],\"Version\":\"2012-10-17\"}","timeouts":null,"xks_key_id":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"rotation_period_in_days":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_lb.main[0]","mode":"managed","type":"aws_lb","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[{"enabled":true,"prefix":"webserverdeployment-test-alb"}],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":true,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"webserverdeployment-test-alb","preserve_host_header":false,"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[{"bucket":true}],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"ipam_pools":[],"minimum_load_balancer_capacity":[],"name_prefix":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags":true,"tags_all":true,"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[{}],"connection_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"aws_lb_listener.http[0]","mode":"managed","type":"aws_lb_listener","name":"http","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"target_group_arn":null,"type":"redirect"}],"port":80,"protocol":"HTTP","timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[{}]}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"ssl_policy":true,"tags":true,"tags_all":true,"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags":{},"tags_all":{}}}},{"address":"aws_lb_target_group.main[0]","mode":"managed","type":"aws_lb_target_group","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"webserverdeployment-test-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"target_type":"instance"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":true,"tags_all":true,"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}},{"address":"aws_lb_target_group_attachment.main[0]","mode":"managed","type":"aws_lb_target_group_attachment","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"port":80},"after_unknown":{"id":true,"target_group_arn":true,"target_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_nat_gateway.main[0]","mode":"managed","type":"aws_nat_gateway","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"aws_nat_gateway.main[1]","mode":"managed","type":"aws_nat_gateway","name":"main","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_route_table.public[0]","mode":"managed","type":"aws_route_table","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":true,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket.patch_logs","mode":"managed","type":"aws_s3_bucket","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":false,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket_lifecycle_configuration.patch_logs","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":7}],"expiration":[{"date":null,"days":120,"expired_object_delete_marker":false}],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"patch_logs_lifecycle","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":30,"storage_class":"STANDARD_IA"},{"date":null,"days":90,"storage_class":"GLACIER"}]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"after_unknown":{"bucket":true,"expected_bucket_owner":true,"id":true,"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[{},{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[{},{}]}]}}},{"address":"aws_s3_bucket_policy.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_policy","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"bucket":true,"id":true,"policy":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket_public_access_block.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket_public_access_block.patch_logs","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.patch_logs","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":true}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"aws_s3_bucket_versioning.alb_access_logs[0]","mode":"managed","type":"aws_s3_bucket_versioning","name":"alb_access_logs","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"aws_s3_bucket_versioning.patch_logs","mode":"managed","type":"aws_s3_bucket_versioning","name":"patch_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for Application Load Balancer - allows HTTP/HTTPS traffic from specified CIDRs","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic to internet","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"HTTP access from allowed CIDRs only","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"HTTPS access from allowed CIDRs only","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name_prefix":"webserverdeployment-test-alb-","revoke_rules_on_delete":false,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name":true,"owner_id":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.ec2","mode":"managed","type":"aws_security_group","name":"ec2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for EC2 instances - allows traffic from ALB and VPC endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic for updates and AWS services","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"HTTPS for VPC endpoints and AWS services communication","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":[],"description":"HTTP traffic from Application Load Balancer only","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":80}],"name_prefix":"webserverdeployment-test-ec2-","revoke_rules_on_delete":false,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name":true,"owner_id":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.vpc_endpoints[0]","mode":"managed","type":"aws_security_group","name":"vpc_endpoints","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for VPC endpoints - allows HTTPS traffic from VPC CIDR","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic for AWS service responses","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"HTTPS traffic from VPC CIDR for AWS service communication","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name_prefix":"webserverdeployment-test-vpc-endpoints-","revoke_rules_on_delete":false,"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name":true,"owner_id":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_sns_topic.infrastructure_alerts","mode":"managed","type":"aws_sns_topic","name":"infrastructure_alerts","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"webserverdeployment-test-infrastructure-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null},"after_unknown":{"arn":true,"beginning_archive_time":true,"fifo_throughput_scope":true,"id":true,"name_prefix":true,"owner":true,"policy":true,"signature_version":true,"tags":true,"tags_all":true,"tracing_config":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_sns_topic_policy.infrastructure_alerts","mode":"managed","type":"aws_sns_topic_policy","name":"infrastructure_alerts","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"arn":true,"id":true,"owner":true,"policy":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_ssm_association.patch_compliance_scan","mode":"managed","type":"aws_ssm_association","name":"patch_compliance_scan","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"apply_only_at_cron_interval":false,"association_name":"webserverdeployment-test-patch-compliance-scan","automation_target_parameter_name":null,"compliance_severity":"MEDIUM","instance_id":null,"max_concurrency":null,"max_errors":null,"name":"AWS-RunPatchBaseline","output_location":[{"s3_key_prefix":"compliance-scans/test/","s3_region":null}],"parameters":{"Operation":"Scan"},"schedule_expression":"cron(0 6 ? * MON *)","sync_compliance":null,"targets":[{"key":"tag:PatchGroup","values":["webserverdeployment-test"]}],"wait_for_success_timeout_seconds":null},"after_unknown":{"arn":true,"association_id":true,"document_version":true,"id":true,"output_location":[{"s3_bucket_name":true}],"parameters":{},"tags":true,"tags_all":true,"targets":[{"values":[false]}]},"before_sensitive":false,"after_sensitive":{"output_location":[{}],"parameters":{},"tags":{},"tags_all":{},"targets":[{"values":[false]}]}}},{"address":"aws_ssm_association.patch_deployment","mode":"managed","type":"aws_ssm_association","name":"patch_deployment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"apply_only_at_cron_interval":false,"association_name":"webserverdeployment-test-patch-deployment","automation_target_parameter_name":null,"compliance_severity":"CRITICAL","instance_id":null,"max_concurrency":null,"max_errors":null,"name":"AWS-RunPatchBaseline","output_location":[{"s3_key_prefix":"patch-logs/test/","s3_region":null}],"parameters":{"Operation":"Install","RebootOption":"RebootIfNeeded"},"schedule_expression":"cron(0 2 ? * SUN *)","sync_compliance":null,"targets":[{"key":"tag:PatchGroup","values":["webserverdeployment-test"]}],"wait_for_success_timeout_seconds":null},"after_unknown":{"arn":true,"association_id":true,"document_version":true,"id":true,"output_location":[{"s3_bucket_name":true}],"parameters":{},"tags":true,"tags_all":true,"targets":[{"values":[false]}]},"before_sensitive":false,"after_sensitive":{"output_location":[{}],"parameters":{},"tags":{},"tags_all":{},"targets":[{"values":[false]}]}}},{"address":"aws_ssm_patch_baseline.amazon_linux[0]","mode":"managed","type":"aws_ssm_patch_baseline","name":"amazon_linux","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"approval_rule":[{"approve_after_days":0,"approve_until_date":null,"compliance_level":"CRITICAL","enable_non_security":false,"patch_filter":[{"key":"CLASSIFICATION","values":["Security","Bugfix"]},{"key":"SEVERITY","values":["Critical","Important"]}]},{"approve_after_days":7,"approve_until_date":null,"compliance_level":"MEDIUM","enable_non_security":true,"patch_filter":[{"key":"CLASSIFICATION","values":["Bugfix","Enhancement","Recommended"]},{"key":"SEVERITY","values":["Medium","Low"]}]}],"approved_patches":null,"approved_patches_compliance_level":"UNSPECIFIED","approved_patches_enable_non_security":null,"description":"Patch baseline for Amazon Linux 2023 systems in test environment","global_filter":[],"name":"webserverdeployment-test-amazon-linux-baseline","operating_system":"AMAZON_LINUX_2023","rejected_patches":null,"rejected_patches_action":"BLOCK","source":[]},"after_unknown":{"approval_rule":[{"patch_filter":[{"values":[false,false]},{"values":[false,false]}]},{"patch_filter":[{"values":[false,false,false]},{"values":[false,false]}]}],"arn":true,"global_filter":[],"id":true,"json":true,"source":[],"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"approval_rule":[{"patch_filter":[{"values":[false,false]},{"values":[false,false]}]},{"patch_filter":[{"values":[false,false,false]},{"values":[false,false]}]}],"global_filter":[],"source":[],"tags":{},"tags_all":{}}}},{"address":"aws_ssm_patch_group.main[0]","mode":"managed","type":"aws_ssm_patch_group","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"patch_group":"webserverdeployment-test"},"after_unknown":{"baseline_id":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.100.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.101.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_vpc.main[0]","mode":"managed","type":"aws_vpc","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.ec2messages[0]","mode":"managed","type":"aws_vpc_endpoint","name":"ec2messages","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"policy":"{\"Statement\":[{\"Action\":[\"ec2messages:AcknowledgeMessage\",\"ec2messages:DeleteMessage\",\"ec2messages:FailMessage\",\"ec2messages:GetEndpoint\",\"ec2messages:GetMessages\",\"ec2messages:SendReply\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ec2messages","service_network_arn":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.ssm[0]","mode":"managed","type":"aws_vpc_endpoint","name":"ssm","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"policy":"{\"Statement\":[{\"Action\":[\"ssm:UpdateInstanceInformation\",\"ssm:SendCommand\",\"ssm:ListCommandInvocations\",\"ssm:DescribeInstanceInformation\",\"ssm:GetDeployablePatchSnapshotForInstance\",\"ssm:GetDefaultPatchBaseline\",\"ssm:GetPatchBaseline\",\"ssm:DescribePatchBaselines\",\"ssm:DescribePatchGroups\",\"ssm:DescribeInstancePatchStates\",\"ssm:DescribeInstancePatches\",\"ssm:DescribePatchProperties\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssm","service_network_arn":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.ssmmessages[0]","mode":"managed","type":"aws_vpc_endpoint","name":"ssmmessages","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"policy":"{\"Statement\":[{\"Action\":[\"ssmmessages:CreateControlChannel\",\"ssmmessages:CreateDataChannel\",\"ssmmessages:OpenControlChannel\",\"ssmmessages:OpenDataChannel\"],\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.us-east-1.ssmmessages","service_network_arn":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_wafv2_web_acl.main[0]","mode":"managed","type":"aws_wafv2_web_acl","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":null,"name":"webserverdeployment-test-web-acl","rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"challenge_config":[],"name":"RateLimitRule","override_action":[],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"aggregate_key_type":"IP","custom_key":[],"evaluation_window_sec":300,"forwarded_ip_config":[],"limit":2000,"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"RateLimitRule","sampled_requests_enabled":true}]},{"action":[],"captcha_config":[],"challenge_config":[],"name":"AWSManagedRulesCommonRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":2,"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesCommonRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"CommonRuleSetMetric","sampled_requests_enabled":true}]}],"rule_json":null,"scope":"REGIONAL","token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"webserverdeployment-test-web-acl","sampled_requests_enabled":true}]},"after_unknown":{"application_integration_url":true,"arn":true,"association_config":[],"capacity":true,"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"id":true,"lock_token":true,"name_prefix":true,"rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"challenge_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"custom_key":[],"forwarded_ip_config":[],"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"challenge_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":true,"tags_all":true,"visibility_config":[{}]},"before_sensitive":false,"after_sensitive":{"association_config":[],"captcha_config":[],"challenge_config":[],"custom_response_body":[],"data_protection_config":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[{"allow":[],"block":[{"custom_response":[]}],"captcha":[],"challenge":[],"count":[]}],"captcha_config":[],"challenge_config":[],"override_action":[],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[],"not_statement":[],"or_statement":[],"rate_based_statement":[{"custom_key":[],"forwarded_ip_config":[],"scope_down_statement":[]}],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"challenge_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"asn_match_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags":{},"tags_all":{},"visibility_config":[{}]}}},{"address":"aws_wafv2_web_acl_association.main[0]","mode":"managed","type":"aws_wafv2_web_acl_association","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"resource_arn":true,"web_acl_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_wafv2_web_acl_logging_configuration.main[0]","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"logging_filter":[],"redacted_fields":[]},"after_unknown":{"id":true,"log_destination_configs":true,"logging_filter":[],"redacted_fields":[],"resource_arn":true},"before_sensitive":false,"after_sensitive":{"log_destination_configs":[],"logging_filter":[],"redacted_fields":[]}}},{"address":"random_id.bucket_suffix","mode":"managed","type":"random_id","name":"bucket_suffix","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"byte_length":4,"keepers":null,"prefix":null},"after_unknown":{"b64_std":true,"b64_url":true,"dec":true,"hex":true,"id":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"alb_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"alb_dns_name":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"alb_security_group_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"alb_zone_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"application_health_check_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"application_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"aws_region":{"actions":["create"],"before":null,"after":"us-east-1","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"budget_name":{"actions":["create"],"before":null,"after":"webserverdeployment-test-monthly-budget","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cloudwatch_alarms":{"actions":["create"],"before":null,"after":["webserverdeployment-test-ec2-status-check-failed-1","webserverdeployment-test-ec2-high-cpu-1","webserverdeployment-test-alb-5xx-errors","webserverdeployment-test-alb-unhealthy-targets","webserverdeployment-test-patch-compliance-failure"],"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cloudwatch_dashboard_url":{"actions":["create"],"before":null,"after":"https://us-east-1.console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=webserverdeployment-test-infrastructure","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cost_alerts_topic_arn":{"actions":["no-op"],"before":null,"after":null,"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"cost_monitoring_enabled":{"actions":["create"],"before":null,"after":true,"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"deployment_summary":{"actions":["create"],"before":null,"after":{"environment":"test","instance_count":1,"instance_ids":[null],"project_name":"webserverdeployment","region":"us-east-1"},"after_unknown":{"alb_dns_name":true,"deployment_time":true,"instance_ids":[true],"vpc_id":true},"before_sensitive":false,"after_sensitive":false},"ec2_security_group_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"environment":{"actions":["create"],"before":null,"after":"test","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"instance_ids":{"actions":["create"],"before":null,"after":[null],"after_unknown":[true],"before_sensitive":false,"after_sensitive":false},"instance_private_ips":{"actions":["create"],"before":null,"after":[null],"after_unknown":[true],"before_sensitive":false,"after_sensitive":false},"monthly_budget_limit":{"actions":["create"],"before":null,"after":100,"after_unknown":false,"before_sensitive":false,"after_sensitive":false},"patch_baseline_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"patch_group_name":{"actions":["create"],"before":null,"after":"webserverdeployment-test","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"patch_logs_bucket":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"private_subnet_ids":{"actions":["create"],"before":null,"after":[null,null],"after_unknown":[true,true],"before_sensitive":false,"after_sensitive":false},"project_name":{"actions":["create"],"before":null,"after":"webserverdeployment","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"public_subnet_ids":{"actions":["create"],"before":null,"after":[null,null],"after_unknown":[true,true],"before_sensitive":false,"after_sensitive":false},"sns_topic_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"vpc_cidr_block":{"actions":["create"],"before":null,"after":"10.0.0.0/16","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"vpc_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"waf_web_acl_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.0","values":{"outputs":{"aws_region":{"sensitive":false,"value":"us-east-1","type":"string"},"budget_name":{"sensitive":false,"value":"webserverdeployment-test-monthly-budget","type":"string"},"cloudwatch_alarms":{"sensitive":false,"value":["webserverdeployment-test-ec2-status-check-failed-1","webserverdeployment-test-ec2-high-cpu-1","webserverdeployment-test-alb-5xx-errors","webserverdeployment-test-alb-unhealthy-targets","webserverdeployment-test-patch-compliance-failure"],"type":["tuple",["string","string","string","string","string"]]},"cloudwatch_dashboard_url":{"sensitive":false,"value":"https://us-east-1.console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=webserverdeployment-test-infrastructure","type":"string"},"cost_monitoring_enabled":{"sensitive":false,"value":true,"type":"bool"},"environment":{"sensitive":false,"value":"test","type":"string"},"monthly_budget_limit":{"sensitive":false,"value":100,"type":"number"},"patch_group_name":{"sensitive":false,"value":"webserverdeployment-test","type":"string"},"project_name":{"sensitive":false,"value":"webserverdeployment","type":"string"},"vpc_cidr_block":{"sensitive":false,"value":"10.0.0.0/16","type":"string"}},"root_module":{"resources":[{"address":"data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0a19bcec6d2ec60fb","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"3000","snapshot_id":"snap-033a8f1bc1f3a377d","throughput":"125","volume_initialization_rate":"0","volume_size":"2","volume_type":"gp3"},"no_device":"","virtual_name":""}],"boot_mode":"uefi-preferred","creation_date":"2025-08-13T21:49:11.000Z","deprecation_time":"2025-11-11T21:49:00.000Z","description":"Amazon Linux 2023 AMI 2023.8.20250818.0 x86_64 Minimal HVM kernel-6.1","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["al2023-ami-*-x86_64"]},{"name":"virtualization-type","values":["hvm"]}],"hypervisor":"xen","id":"ami-0a19bcec6d2ec60fb","image_id":"ami-0a19bcec6d2ec60fb","image_location":"amazon/al2023-ami-minimal-2023.8.20250818.0-kernel-6.1-x86_64","image_owner_alias":"amazon","image_type":"machine","imds_support":"v2.0","include_deprecated":false,"kernel_id":"","last_launched_time":"","most_recent":true,"name":"al2023-ami-minimal-2023.8.20250818.0-kernel-6.1-x86_64","name_regex":null,"owner_id":"137112412989","owners":["amazon"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-033a8f1bc1f3a377d","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","uefi_data":null,"usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["us-east-1-zg-1"],"id":"us-east-1","names":["us-east-1a","us-east-1b","us-east-1c","us-east-1d","us-east-1e","us-east-1f"],"state":"available","timeouts":null,"zone_ids":["use1-az2","use1-az4","use1-az6","use1-az1","use1-az3","use1-az5"]},"sensitive_values":{"group_names":[false],"names":[false,false,false,false,false,false],"zone_ids":[false,false,false,false,false,false]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"948572562675","arn":"arn:aws:iam::948572562675:user/blaiseadmin","id":"948572562675","user_id":"AIDA5ZW2UUTZQPZWOXCGV"},"sensitive_values":{}},{"address":"data.aws_elb_service_account.main","mode":"data","type":"aws_elb_service_account","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::127311923021:root","id":"127311923021","region":null},"sensitive_values":{}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"default_tags":[{"tags":{"references":["local.common_tags"]}}],"region":{"references":["var.aws_region"]}}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","version_constraint":"~\u003e 3.1"}},"root_module":{"outputs":{"alb_arn":{"expression":{"references":["local.alb_arn"]},"description":"ARN of the load balancer"},"alb_dns_name":{"expression":{"references":["local.alb_dns"]},"description":"DNS name of the load balancer"},"alb_security_group_id":{"expression":{"references":["aws_security_group.alb.id","aws_security_group.alb"]},"description":"ID of the ALB security group"},"alb_zone_id":{"expression":{"references":["var.create_alb","aws_lb.main[0].zone_id","aws_lb.main[0]","aws_lb.main","data.aws_lb.existing[0].zone_id","data.aws_lb.existing[0]","data.aws_lb.existing"]},"description":"Zone ID of the load balancer"},"application_health_check_url":{"expression":{"references":["local.alb_dns"]},"description":"URL for application health checks"},"application_url":{"expression":{"references":["local.alb_dns"]},"description":"URL to access the application"},"aws_region":{"expression":{"references":["var.aws_region"]},"description":"AWS region"},"budget_name":{"expression":{"references":["var.enable_cost_monitoring","aws_budgets_budget.monthly_cost_budget[0].name","aws_budgets_budget.monthly_cost_budget[0]","aws_budgets_budget.monthly_cost_budget"]},"description":"Name of the AWS Budget"},"cloudwatch_alarms":{"expression":{"references":["aws_cloudwatch_metric_alarm.ec2_status_check_failed","aws_cloudwatch_metric_alarm.ec2_high_cpu","aws_cloudwatch_metric_alarm.alb_5xx_errors.alarm_name","aws_cloudwatch_metric_alarm.alb_5xx_errors","aws_cloudwatch_metric_alarm.alb_unhealthy_targets.alarm_name","aws_cloudwatch_metric_alarm.alb_unhealthy_targets","aws_cloudwatch_metric_alarm.patch_compliance_failure.alarm_name","aws_cloudwatch_metric_alarm.patch_compliance_failure"]},"description":"List of CloudWatch alarm names for monitoring"},"cloudwatch_dashboard_url":{"expression":{"references":["var.aws_region","var.aws_region","aws_cloudwatch_dashboard.infrastructure.dashboard_name","aws_cloudwatch_dashboard.infrastructure"]},"description":"URL of the CloudWatch dashboard"},"cost_alerts_topic_arn":{"expression":{"references":["var.enable_cost_monitoring","var.enable_sns_cost_alerts","aws_sns_topic.cost_alerts[0].arn","aws_sns_topic.cost_alerts[0]","aws_sns_topic.cost_alerts"]},"description":"ARN of the SNS topic for cost alerts"},"cost_monitoring_enabled":{"expression":{"references":["var.enable_cost_monitoring"]},"description":"Whether cost monitoring is enabled"},"deployment_summary":{"expression":{"references":["var.project_name","var.env","var.aws_region","local.vpc_id","local.alb_dns","var.create_instances","var.instance_count","var.create_instances","aws_instance.main"]},"description":"Summary of deployed resources for CI/CD reporting"},"ec2_security_group_id":{"expression":{"references":["aws_security_group.ec2.id","aws_security_group.ec2"]},"description":"ID of the EC2 security group"},"environment":{"expression":{"references":["var.env"]},"description":"Environment name"},"instance_ids":{"expression":{"references":["aws_instance.main"]},"description":"IDs of the EC2 instances"},"instance_private_ips":{"expression":{"references":["aws_instance.main"]},"description":"Private IP addresses of the EC2 instances"},"monthly_budget_limit":{"expression":{"references":["var.enable_cost_monitoring","var.monthly_budget_limit"]},"description":"Monthly budget limit in USD"},"patch_baseline_id":{"expression":{"references":["local.patch_baseline_id"]},"description":"ID of the SSM patch baseline"},"patch_group_name":{"expression":{"references":["local.patch_group_name"]},"description":"Name of the patch group"},"patch_logs_bucket":{"expression":{"references":["aws_s3_bucket.patch_logs.bucket","aws_s3_bucket.patch_logs"]},"description":"Name of the S3 bucket for patch logs"},"private_subnet_ids":{"expression":{"references":["local.private_subnet_ids"]},"description":"IDs of the private subnets"},"project_name":{"expression":{"references":["var.project_name"]},"description":"Project name"},"public_subnet_ids":{"expression":{"references":["local.public_subnet_ids"]},"description":"IDs of the public subnets"},"sns_topic_arn":{"expression":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"description":"ARN of the SNS topic for alerts"},"vpc_cidr_block":{"expression":{"references":["local.vpc_cidr"]},"description":"CIDR block of the VPC"},"vpc_id":{"expression":{"references":["local.vpc_id"]},"description":"ID of the VPC"},"waf_web_acl_arn":{"expression":{"references":["local.waf_web_acl_arn"]},"description":"ARN of the WAF Web ACL"}},"resources":[{"address":"aws_budgets_budget.monthly_cost_budget","mode":"managed","type":"aws_budgets_budget","name":"monthly_cost_budget","provider_config_key":"aws","expressions":{"budget_type":{"constant_value":"COST"},"cost_filter":[{"name":{"constant_value":"Service"},"values":{"constant_value":["Amazon Elastic Compute Cloud - Compute"]}}],"limit_amount":{"references":["var.monthly_budget_limit"]},"limit_unit":{"constant_value":"USD"},"name":{"references":["var.project_name","var.env"]},"notification":[{"comparison_operator":{"constant_value":"GREATER_THAN"},"notification_type":{"constant_value":"ACTUAL"},"subscriber_email_addresses":{"references":["var.budget_alert_emails"]},"threshold":{"constant_value":80},"threshold_type":{"constant_value":"PERCENTAGE"}},{"comparison_operator":{"constant_value":"GREATER_THAN"},"notification_type":{"constant_value":"ACTUAL"},"subscriber_email_addresses":{"references":["var.budget_alert_emails"]},"threshold":{"constant_value":100},"threshold_type":{"constant_value":"PERCENTAGE"}},{"comparison_operator":{"constant_value":"GREATER_THAN"},"notification_type":{"constant_value":"FORECASTED"},"subscriber_email_addresses":{"references":["var.budget_alert_emails"]},"threshold":{"constant_value":120},"threshold_type":{"constant_value":"PERCENTAGE"}}],"tags":{"references":["local.common_tags","var.project_name","var.env","var.project_name","var.env"]},"time_period_start":{},"time_unit":{"constant_value":"MONTHLY"}},"schema_version":0,"count_expression":{"references":["var.enable_cost_monitoring"]}},{"address":"aws_cloudwatch_dashboard.infrastructure","mode":"managed","type":"aws_cloudwatch_dashboard","name":"infrastructure","provider_config_key":"aws","expressions":{"dashboard_body":{"references":["var.instance_count","aws_instance.main","var.aws_region","var.create_alb","aws_lb.main[0].arn_suffix","aws_lb.main[0]","aws_lb.main","data.aws_lb.existing[0].arn_suffix","data.aws_lb.existing[0]","data.aws_lb.existing","var.aws_region","var.create_alb","aws_lb_target_group.main[0].arn_suffix","aws_lb_target_group.main[0]","aws_lb_target_group.main","data.aws_lb_target_group.existing[0].arn_suffix","data.aws_lb_target_group.existing[0]","data.aws_lb_target_group.existing","var.create_alb","aws_lb.main[0].arn_suffix","aws_lb.main[0]","aws_lb.main","data.aws_lb.existing[0].arn_suffix","data.aws_lb.existing[0]","data.aws_lb.existing","var.aws_region"]},"dashboard_name":{"references":["var.project_name","var.env"]}},"schema_version":0},{"address":"aws_cloudwatch_log_group.waf_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"waf_log_group","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["aws_kms_key.waf_logs.arn","aws_kms_key.waf_logs"]},"name":{"references":["var.project_name","var.env"]},"retention_in_days":{"references":["var.cloudwatch_log_retention_days"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0},{"address":"aws_cloudwatch_metric_alarm.alb_5xx_errors","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"alb_5xx_errors","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"alarm_description":{"constant_value":"This metric monitors ALB 5xx error count"},"alarm_name":{"references":["var.project_name","var.env"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["var.create_alb","aws_lb.main[0].arn_suffix","aws_lb.main[0]","aws_lb.main","data.aws_lb.existing[0].arn_suffix","data.aws_lb.existing[0]","data.aws_lb.existing"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"HTTPCode_ELB_5XX_Count"},"namespace":{"constant_value":"AWS/ApplicationELB"},"ok_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"period":{"constant_value":"300"},"statistic":{"constant_value":"Sum"},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"threshold":{"constant_value":"5"},"treat_missing_data":{"constant_value":"notBreaching"}},"schema_version":1},{"address":"aws_cloudwatch_metric_alarm.alb_unhealthy_targets","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"alb_unhealthy_targets","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"alarm_description":{"constant_value":"This metric monitors ALB unhealthy target count"},"alarm_name":{"references":["var.project_name","var.env"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["var.create_alb","aws_lb_target_group.main[0].arn_suffix","aws_lb_target_group.main[0]","aws_lb_target_group.main","data.aws_lb_target_group.existing[0].arn_suffix","data.aws_lb_target_group.existing[0]","data.aws_lb_target_group.existing","var.create_alb","aws_lb.main[0].arn_suffix","aws_lb.main[0]","aws_lb.main","data.aws_lb.existing[0].arn_suffix","data.aws_lb.existing[0]","data.aws_lb.existing"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"UnHealthyHostCount"},"namespace":{"constant_value":"AWS/ApplicationELB"},"ok_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"period":{"constant_value":"60"},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"threshold":{"constant_value":"0"},"treat_missing_data":{"constant_value":"notBreaching"}},"schema_version":1},{"address":"aws_cloudwatch_metric_alarm.ec2_high_cpu","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"ec2_high_cpu","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"alarm_description":{"references":["aws_instance.main","count.index"]},"alarm_name":{"references":["var.project_name","var.env","count.index"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_instance.main","count.index"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"CPUUtilization"},"namespace":{"constant_value":"AWS/EC2"},"ok_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"period":{"constant_value":"300"},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]},"threshold":{"constant_value":"80"}},"schema_version":1,"count_expression":{"references":["var.instance_count"]}},{"address":"aws_cloudwatch_metric_alarm.ec2_status_check_failed","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"ec2_status_check_failed","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"alarm_description":{"references":["aws_instance.main","count.index"]},"alarm_name":{"references":["var.project_name","var.env","count.index"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_instance.main","count.index"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"StatusCheckFailed"},"namespace":{"constant_value":"AWS/EC2"},"ok_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"period":{"constant_value":"60"},"statistic":{"constant_value":"Maximum"},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]},"threshold":{"constant_value":"0"}},"schema_version":1,"count_expression":{"references":["var.instance_count"]}},{"address":"aws_cloudwatch_metric_alarm.estimated_charges","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"estimated_charges","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["var.enable_sns_cost_alerts","aws_sns_topic.cost_alerts[0].arn","aws_sns_topic.cost_alerts[0]","aws_sns_topic.cost_alerts"]},"alarm_description":{"references":["var.project_name","var.env"]},"alarm_name":{"references":["var.project_name","var.env"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"constant_value":{"Currency":"USD"}},"evaluation_periods":{"constant_value":"1"},"metric_name":{"constant_value":"EstimatedCharges"},"namespace":{"constant_value":"AWS/Billing"},"period":{"constant_value":"86400"},"statistic":{"constant_value":"Maximum"},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"threshold":{"references":["var.cloudwatch_billing_threshold"]}},"schema_version":1,"count_expression":{"references":["var.enable_cost_monitoring","var.enable_cloudwatch_billing_alarms"]}},{"address":"aws_cloudwatch_metric_alarm.patch_compliance_failure","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"patch_compliance_failure","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"alarm_description":{"constant_value":"This metric monitors patch compliance failures"},"alarm_name":{"references":["var.project_name","var.env"]},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["var.project_name","var.env"]},"evaluation_periods":{"constant_value":"1"},"metric_name":{"constant_value":"ComplianceByPatchGroup"},"namespace":{"constant_value":"AWS/SSM-PatchManager"},"ok_actions":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"period":{"constant_value":"300"},"statistic":{"constant_value":"Average"},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"threshold":{"constant_value":"0"}},"schema_version":1},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.az_count"]},"depends_on":["aws_internet_gateway.main"]},{"address":"aws_iam_instance_profile.ec2_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_profile","provider_config_key":"aws","expressions":{"name_prefix":{"references":["var.project_name","var.env"]},"role":{"references":["aws_iam_role.ec2_role.name","aws_iam_role.ec2_role"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0},{"address":"aws_iam_policy.ec2_cloudwatch_custom","mode":"managed","type":"aws_iam_policy","name":"ec2_cloudwatch_custom","provider_config_key":"aws","expressions":{"description":{"constant_value":"Custom CloudWatch permissions for EC2 instances"},"name_prefix":{"references":["var.project_name","var.env"]},"policy":{},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0},{"address":"aws_iam_role.ec2_role","mode":"managed","type":"aws_iam_role","name":"ec2_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name_prefix":{"references":["var.project_name","var.env"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0},{"address":"aws_iam_role_policy.ssm_patch_management","mode":"managed","type":"aws_iam_role_policy","name":"ssm_patch_management","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name","var.env"]},"policy":{"references":["aws_s3_bucket.patch_logs.arn","aws_s3_bucket.patch_logs","aws_s3_bucket.patch_logs.arn","aws_s3_bucket.patch_logs"]},"role":{"references":["aws_iam_role.ec2_role.id","aws_iam_role.ec2_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ec2_cloudwatch_agent_server_policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_cloudwatch_agent_server_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"},"role":{"references":["aws_iam_role.ec2_role.name","aws_iam_role.ec2_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ec2_cloudwatch_custom","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_cloudwatch_custom","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.ec2_cloudwatch_custom.arn","aws_iam_policy.ec2_cloudwatch_custom"]},"role":{"references":["aws_iam_role.ec2_role.name","aws_iam_role.ec2_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ec2_ssm_managed_instance_core","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ec2_ssm_managed_instance_core","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"role":{"references":["aws_iam_role.ec2_role.name","aws_iam_role.ec2_role"]}},"schema_version":0},{"address":"aws_instance.main","mode":"managed","type":"aws_instance","name":"main","provider_config_key":"aws","expressions":{"ami":{"references":["data.aws_ami.amazon_linux.id","data.aws_ami.amazon_linux"]},"ebs_optimized":{"constant_value":true},"iam_instance_profile":{"references":["aws_iam_instance_profile.ec2_profile.name","aws_iam_instance_profile.ec2_profile"]},"instance_type":{"references":["var.instance_type"]},"metadata_options":[{"http_endpoint":{"constant_value":"enabled"},"http_put_response_hop_limit":{"constant_value":1},"http_tokens":{"constant_value":"required"},"instance_metadata_tags":{"constant_value":"enabled"}}],"monitoring":{"references":["var.enable_detailed_monitoring"]},"root_block_device":[{"delete_on_termination":{"constant_value":true},"encrypted":{"constant_value":true},"kms_key_id":{"references":["var.kms_key_id"]},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]},"volume_size":{"constant_value":20},"volume_type":{"constant_value":"gp3"}}],"subnet_id":{"references":["var.create_vpc","aws_subnet.private","count.index","var.az_count","data.aws_subnets.existing_private[0].ids","data.aws_subnets.existing_private[0]","data.aws_subnets.existing_private","count.index","data.aws_subnets.existing_private[0].ids","data.aws_subnets.existing_private[0]","data.aws_subnets.existing_private"]},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index","var.project_name","var.env"]},"user_data":{"references":["local.user_data"]},"vpc_security_group_ids":{"references":["aws_security_group.ec2.id","aws_security_group.ec2"]}},"schema_version":1,"count_expression":{"references":["var.create_instances","var.instance_count"]}},{"address":"aws_internet_gateway.main","mode":"managed","type":"aws_internet_gateway","name":"main","provider_config_key":"aws","expressions":{"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_kms_alias.waf_logs","mode":"managed","type":"aws_kms_alias","name":"waf_logs","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name","var.env"]},"target_key_id":{"references":["aws_kms_key.waf_logs.key_id","aws_kms_key.waf_logs"]}},"schema_version":0},{"address":"aws_kms_key.waf_logs","mode":"managed","type":"aws_kms_key","name":"waf_logs","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"constant_value":7},"description":{"constant_value":"KMS key for WAF log encryption"},"enable_key_rotation":{"constant_value":true},"policy":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","var.aws_region"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0},{"address":"aws_lb.main","mode":"managed","type":"aws_lb","name":"main","provider_config_key":"aws","expressions":{"access_logs":[{"bucket":{"references":["var.alb_access_logs_bucket","var.alb_access_logs_bucket","var.enable_alb_access_logs","aws_s3_bucket.alb_access_logs[0].bucket","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs"]},"enabled":{"references":["var.enable_alb_access_logs"]},"prefix":{"references":["var.project_name","var.env"]}}],"drop_invalid_header_fields":{"constant_value":true},"enable_deletion_protection":{"references":["var.enable_alb_deletion_protection"]},"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["var.project_name","var.env"]},"security_groups":{"references":["aws_security_group.alb.id","aws_security_group.alb"]},"subnets":{"references":["var.create_vpc","aws_subnet.public","data.aws_subnets.existing[0].ids","data.aws_subnets.existing[0]","data.aws_subnets.existing"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.create_alb"]}},{"address":"aws_lb_listener.http","mode":"managed","type":"aws_lb_listener","name":"http","provider_config_key":"aws","expressions":{"default_action":[{"redirect":[{"port":{"constant_value":"443"},"protocol":{"constant_value":"HTTPS"},"status_code":{"constant_value":"HTTP_301"}}],"type":{"constant_value":"redirect"}}],"load_balancer_arn":{"references":["aws_lb.main[0].arn","aws_lb.main[0]","aws_lb.main"]},"port":{"constant_value":"80"},"protocol":{"constant_value":"HTTP"},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.create_alb"]}},{"address":"aws_lb_listener.https","mode":"managed","type":"aws_lb_listener","name":"https","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["var.ssl_certificate_arn"]},"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.main[0].arn","aws_lb_target_group.main[0]","aws_lb_target_group.main"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.main[0].arn","aws_lb.main[0]","aws_lb.main"]},"port":{"constant_value":"443"},"protocol":{"constant_value":"HTTPS"},"ssl_policy":{"constant_value":"ELBSecurityPolicy-TLS-1-2-2017-01"},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.create_alb","var.ssl_certificate_arn"]}},{"address":"aws_lb_target_group.main","mode":"managed","type":"aws_lb_target_group","name":"main","provider_config_key":"aws","expressions":{"health_check":[{"enabled":{"constant_value":true},"healthy_threshold":{"constant_value":2},"interval":{"constant_value":30},"matcher":{"constant_value":"200"},"path":{"constant_value":"/"},"port":{"constant_value":"traffic-port"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":2}}],"name":{"references":["var.project_name","var.env"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_id":{"references":["var.create_vpc","aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main","data.aws_vpc.existing[0].id","data.aws_vpc.existing[0]","data.aws_vpc.existing"]}},"schema_version":0,"count_expression":{"references":["var.create_alb"]}},{"address":"aws_lb_target_group_attachment.main","mode":"managed","type":"aws_lb_target_group_attachment","name":"main","provider_config_key":"aws","expressions":{"port":{"constant_value":80},"target_group_arn":{"references":["aws_lb_target_group.main[0].arn","aws_lb_target_group.main[0]","aws_lb_target_group.main"]},"target_id":{"references":["aws_instance.main","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_alb","var.create_instances","var.instance_count"]}},{"address":"aws_nat_gateway.main","mode":"managed","type":"aws_nat_gateway","name":"main","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat","count.index"]},"subnet_id":{"references":["aws_subnet.public","count.index"]},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.az_count"]},"depends_on":["aws_internet_gateway.main"]},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"aws","expressions":{"route":{"references":["aws_nat_gateway.main","count.index"]},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.main[0].id","aws_internet_gateway.main[0]","aws_internet_gateway.main"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public[0].id","aws_route_table.public[0]","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_s3_bucket.alb_access_logs","mode":"managed","type":"aws_s3_bucket","name":"alb_access_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["var.project_name","var.env","random_id.bucket_suffix.hex","random_id.bucket_suffix"]},"force_destroy":{"references":["var.env"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.create_alb","var.enable_alb_access_logs","var.alb_access_logs_bucket"]}},{"address":"aws_s3_bucket.patch_logs","mode":"managed","type":"aws_s3_bucket","name":"patch_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["var.project_name","var.env","random_id.bucket_suffix.hex","random_id.bucket_suffix"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0},{"address":"aws_s3_bucket_lifecycle_configuration.patch_logs","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"patch_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.patch_logs.id","aws_s3_bucket.patch_logs"]},"rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":{"constant_value":7}}],"expiration":[{"days":{"references":["var.backup_retention_days"]}}],"filter":[{"prefix":{"constant_value":""}}],"id":{"constant_value":"patch_logs_lifecycle"},"status":{"constant_value":"Enabled"},"transition":[{"days":{"constant_value":30},"storage_class":{"constant_value":"STANDARD_IA"}},{"days":{"constant_value":90},"storage_class":{"constant_value":"GLACIER"}}]}]},"schema_version":1},{"address":"aws_s3_bucket_policy.alb_access_logs","mode":"managed","type":"aws_s3_bucket_policy","name":"alb_access_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.alb_access_logs[0].id","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs"]},"policy":{"references":["data.aws_elb_service_account.main.id","data.aws_elb_service_account.main","aws_s3_bucket.alb_access_logs[0].arn","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs","var.project_name","var.env","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","aws_s3_bucket.alb_access_logs[0].arn","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs","var.project_name","var.env","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current","aws_s3_bucket.alb_access_logs[0].arn","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs"]}},"schema_version":0,"count_expression":{"references":["var.create_alb","var.enable_alb_access_logs","var.alb_access_logs_bucket"]}},{"address":"aws_s3_bucket_public_access_block.alb_access_logs","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"alb_access_logs","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.alb_access_logs[0].id","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.create_alb","var.enable_alb_access_logs","var.alb_access_logs_bucket"]}},{"address":"aws_s3_bucket_public_access_block.patch_logs","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"patch_logs","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.patch_logs.id","aws_s3_bucket.patch_logs"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.alb_access_logs","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"alb_access_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.alb_access_logs[0].id","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0,"count_expression":{"references":["var.create_alb","var.enable_alb_access_logs","var.alb_access_logs_bucket"]}},{"address":"aws_s3_bucket_server_side_encryption_configuration.patch_logs","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"patch_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.patch_logs.id","aws_s3_bucket.patch_logs"]},"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["var.kms_key_id"]},"sse_algorithm":{"references":["var.kms_key_id"]}}],"bucket_key_enabled":{"constant_value":true}}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.alb_access_logs","mode":"managed","type":"aws_s3_bucket_versioning","name":"alb_access_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.alb_access_logs[0].id","aws_s3_bucket.alb_access_logs[0]","aws_s3_bucket.alb_access_logs"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0,"count_expression":{"references":["var.create_alb","var.enable_alb_access_logs","var.alb_access_logs_bucket"]}},{"address":"aws_s3_bucket_versioning.patch_logs","mode":"managed","type":"aws_s3_bucket_versioning","name":"patch_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.patch_logs.id","aws_s3_bucket.patch_logs"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for Application Load Balancer - allows HTTP/HTTPS traffic from specified CIDRs"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic to internet","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.allowed_http_cidrs","var.allowed_http_cidrs"]},"name_prefix":{"references":["var.project_name","var.env"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_id":{"references":["var.create_vpc","aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main","data.aws_vpc.existing[0].id","data.aws_vpc.existing[0]","data.aws_vpc.existing"]}},"schema_version":1},{"address":"aws_security_group.ec2","mode":"managed","type":"aws_security_group","name":"ec2","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for EC2 instances - allows traffic from ALB and VPC endpoints"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic for updates and AWS services","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_security_group.alb.id","aws_security_group.alb","var.cidr_block"]},"name_prefix":{"references":["var.project_name","var.env"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_id":{"references":["var.create_vpc","aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main","data.aws_vpc.existing[0].id","data.aws_vpc.existing[0]","data.aws_vpc.existing"]}},"schema_version":1},{"address":"aws_security_group.vpc_endpoints","mode":"managed","type":"aws_security_group","name":"vpc_endpoints","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for VPC endpoints - allows HTTPS traffic from VPC CIDR"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All outbound traffic for AWS service responses","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.cidr_block"]},"name_prefix":{"references":["var.project_name","var.env"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_sns_topic.cost_alerts","mode":"managed","type":"aws_sns_topic","name":"cost_alerts","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name","var.env"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.enable_cost_monitoring","var.enable_sns_cost_alerts"]}},{"address":"aws_sns_topic.infrastructure_alerts","mode":"managed","type":"aws_sns_topic","name":"infrastructure_alerts","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name","var.env"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":0},{"address":"aws_sns_topic_policy.infrastructure_alerts","mode":"managed","type":"aws_sns_topic_policy","name":"infrastructure_alerts","provider_config_key":"aws","expressions":{"arn":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]},"policy":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]}},"schema_version":0},{"address":"aws_sns_topic_subscription.cost_alert_email","mode":"managed","type":"aws_sns_topic_subscription","name":"cost_alert_email","provider_config_key":"aws","expressions":{"endpoint":{"references":["var.budget_alert_emails","count.index"]},"protocol":{"constant_value":"email"},"topic_arn":{"references":["aws_sns_topic.cost_alerts[0].arn","aws_sns_topic.cost_alerts[0]","aws_sns_topic.cost_alerts"]}},"schema_version":0,"count_expression":{"references":["var.enable_cost_monitoring","var.enable_sns_cost_alerts","var.budget_alert_emails"]}},{"address":"aws_sns_topic_subscription.email_alerts","mode":"managed","type":"aws_sns_topic_subscription","name":"email_alerts","provider_config_key":"aws","expressions":{"endpoint":{"references":["var.sns_email_endpoints","count.index"]},"protocol":{"constant_value":"email"},"topic_arn":{"references":["aws_sns_topic.infrastructure_alerts.arn","aws_sns_topic.infrastructure_alerts"]}},"schema_version":0,"count_expression":{"references":["var.sns_email_endpoints"]}},{"address":"aws_ssm_association.patch_compliance_scan","mode":"managed","type":"aws_ssm_association","name":"patch_compliance_scan","provider_config_key":"aws","expressions":{"association_name":{"references":["var.project_name","var.env"]},"compliance_severity":{"constant_value":"MEDIUM"},"name":{"constant_value":"AWS-RunPatchBaseline"},"output_location":[{"s3_bucket_name":{"references":["aws_s3_bucket.patch_logs.bucket","aws_s3_bucket.patch_logs"]},"s3_key_prefix":{"references":["var.env"]}}],"parameters":{"constant_value":{"Operation":"Scan"}},"schedule_expression":{"constant_value":"cron(0 6 ? * MON *)"},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"targets":[{"key":{"constant_value":"tag:PatchGroup"},"values":{"references":["var.project_name","var.env"]}}]},"schema_version":1},{"address":"aws_ssm_association.patch_deployment","mode":"managed","type":"aws_ssm_association","name":"patch_deployment","provider_config_key":"aws","expressions":{"association_name":{"references":["var.project_name","var.env"]},"compliance_severity":{"constant_value":"CRITICAL"},"name":{"constant_value":"AWS-RunPatchBaseline"},"output_location":[{"s3_bucket_name":{"references":["aws_s3_bucket.patch_logs.bucket","aws_s3_bucket.patch_logs"]},"s3_key_prefix":{"references":["var.env"]}}],"parameters":{"constant_value":{"Operation":"Install","RebootOption":"RebootIfNeeded"}},"schedule_expression":{"references":["var.patch_schedule"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"targets":[{"key":{"constant_value":"tag:PatchGroup"},"values":{"references":["var.project_name","var.env"]}}]},"schema_version":1},{"address":"aws_ssm_patch_baseline.amazon_linux","mode":"managed","type":"aws_ssm_patch_baseline","name":"amazon_linux","provider_config_key":"aws","expressions":{"approval_rule":[{"approve_after_days":{"constant_value":0},"compliance_level":{"constant_value":"CRITICAL"},"enable_non_security":{"constant_value":false},"patch_filter":[{"key":{"constant_value":"CLASSIFICATION"},"values":{"constant_value":["Security","Bugfix"]}},{"key":{"constant_value":"SEVERITY"},"values":{"constant_value":["Critical","Important"]}}]},{"approve_after_days":{"constant_value":7},"compliance_level":{"constant_value":"MEDIUM"},"enable_non_security":{"constant_value":true},"patch_filter":[{"key":{"constant_value":"CLASSIFICATION"},"values":{"constant_value":["Bugfix","Enhancement","Recommended"]}},{"key":{"constant_value":"SEVERITY"},"values":{"constant_value":["Medium","Low"]}}]}],"description":{"references":["var.env"]},"name":{"references":["var.project_name","var.env"]},"operating_system":{"constant_value":"AMAZON_LINUX_2023"},"rejected_patches_action":{"constant_value":"BLOCK"},"tags":{"references":["local.common_tags","var.project_name","var.env","var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.create_patch_baseline"]}},{"address":"aws_ssm_patch_group.main","mode":"managed","type":"aws_ssm_patch_group","name":"main","provider_config_key":"aws","expressions":{"baseline_id":{"references":["aws_ssm_patch_baseline.amazon_linux[0].id","aws_ssm_patch_baseline.amazon_linux[0]","aws_ssm_patch_baseline.amazon_linux"]},"patch_group":{"references":["var.project_name","var.env"]}},"schema_version":1,"count_expression":{"references":["var.create_patch_baseline"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names","data.aws_availability_zones.available","count.index"]},"cidr_block":{"references":["var.cidr_block","count.index"]},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names","data.aws_availability_zones.available","count.index"]},"cidr_block":{"references":["var.cidr_block","count.index"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["local.common_tags","var.project_name","var.env","count.index"]},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc","var.az_count"]}},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.cidr_block"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.common_tags","var.project_name","var.env"]}},"schema_version":1,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_vpc_endpoint.ec2messages","mode":"managed","type":"aws_vpc_endpoint","name":"ec2messages","provider_config_key":"aws","expressions":{"policy":{},"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpc_endpoints[0].id","aws_security_group.vpc_endpoints[0]","aws_security_group.vpc_endpoints"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_vpc_endpoint.ssm","mode":"managed","type":"aws_vpc_endpoint","name":"ssm","provider_config_key":"aws","expressions":{"policy":{},"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpc_endpoints[0].id","aws_security_group.vpc_endpoints[0]","aws_security_group.vpc_endpoints"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_vpc_endpoint.ssmmessages","mode":"managed","type":"aws_vpc_endpoint","name":"ssmmessages","provider_config_key":"aws","expressions":{"policy":{},"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpc_endpoints[0].id","aws_security_group.vpc_endpoints[0]","aws_security_group.vpc_endpoints"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.main[0].id","aws_vpc.main[0]","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"aws_wafv2_web_acl.main","mode":"managed","type":"aws_wafv2_web_acl","name":"main","provider_config_key":"aws","expressions":{"default_action":[{"allow":[{}]}],"name":{"references":["var.project_name","var.env"]},"rule":[{"action":[{"block":[{}]}],"name":{"constant_value":"RateLimitRule"},"priority":{"constant_value":1},"statement":[{"rate_based_statement":[{"aggregate_key_type":{"constant_value":"IP"},"limit":{"references":["var.waf_rate_limit"]}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"RateLimitRule"},"sampled_requests_enabled":{"constant_value":true}}]},{"name":{"constant_value":"AWSManagedRulesCommonRuleSet"},"override_action":[{"none":[{}]}],"priority":{"constant_value":2},"statement":[{"managed_rule_group_statement":[{"name":{"constant_value":"AWSManagedRulesCommonRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"CommonRuleSetMetric"},"sampled_requests_enabled":{"constant_value":true}}]}],"scope":{"constant_value":"REGIONAL"},"tags":{"references":["local.common_tags","var.project_name","var.env"]},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"references":["var.project_name","var.env"]},"sampled_requests_enabled":{"constant_value":true}}]},"schema_version":0,"count_expression":{"references":["var.create_waf"]}},{"address":"aws_wafv2_web_acl_association.main","mode":"managed","type":"aws_wafv2_web_acl_association","name":"main","provider_config_key":"aws","expressions":{"resource_arn":{"references":["aws_lb.main[0].arn","aws_lb.main[0]","aws_lb.main"]},"web_acl_arn":{"references":["aws_wafv2_web_acl.main[0].arn","aws_wafv2_web_acl.main[0]","aws_wafv2_web_acl.main"]}},"schema_version":0,"count_expression":{"references":["var.create_alb","var.create_waf"]}},{"address":"aws_wafv2_web_acl_logging_configuration.main","mode":"managed","type":"aws_wafv2_web_acl_logging_configuration","name":"main","provider_config_key":"aws","expressions":{"log_destination_configs":{"references":["aws_cloudwatch_log_group.waf_log_group.arn","aws_cloudwatch_log_group.waf_log_group"]},"resource_arn":{"references":["aws_wafv2_web_acl.main[0].arn","aws_wafv2_web_acl.main[0]","aws_wafv2_web_acl.main"]}},"schema_version":0,"count_expression":{"references":["var.create_waf"]}},{"address":"random_id.bucket_suffix","mode":"managed","type":"random_id","name":"bucket_suffix","provider_config_key":"random","expressions":{"byte_length":{"constant_value":4}},"schema_version":0},{"address":"data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["al2023-ami-*-x86_64"]}},{"name":{"constant_value":"virtualization-type"},"values":{"constant_value":["hvm"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","expressions":{"state":{"constant_value":"available"}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_elb_service_account.main","mode":"data","type":"aws_elb_service_account","name":"main","provider_config_key":"aws","schema_version":0},{"address":"data.aws_lb.existing","mode":"data","type":"aws_lb","name":"existing","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.create_alb"]}},{"address":"data.aws_lb_target_group.existing","mode":"data","type":"aws_lb_target_group","name":"existing","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name","var.env"]}},"schema_version":0,"count_expression":{"references":["var.create_alb"]}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_ssm_patch_baseline.existing","mode":"data","type":"aws_ssm_patch_baseline","name":"existing","provider_config_key":"aws","expressions":{"name_prefix":{"references":["var.project_name","var.env"]},"operating_system":{"constant_value":"AMAZON_LINUX_2023"},"owner":{"constant_value":"Self"}},"schema_version":0,"count_expression":{"references":["var.create_patch_baseline"]}},{"address":"data.aws_subnets.existing","mode":"data","type":"aws_subnets","name":"existing","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"vpc-id"},"values":{"references":["data.aws_vpc.existing[0].id","data.aws_vpc.existing[0]","data.aws_vpc.existing"]}},{"name":{"constant_value":"tag:Type"},"values":{"constant_value":["Public"]}}]},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"data.aws_subnets.existing_private","mode":"data","type":"aws_subnets","name":"existing_private","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"vpc-id"},"values":{"references":["data.aws_vpc.existing[0].id","data.aws_vpc.existing[0]","data.aws_vpc.existing"]}},{"name":{"constant_value":"tag:Type"},"values":{"constant_value":["Private"]}}]},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"data.aws_vpc.existing","mode":"data","type":"aws_vpc","name":"existing","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"tag:Name"},"values":{"references":["var.project_name","var.env"]}}]},"schema_version":0,"count_expression":{"references":["var.create_vpc"]}},{"address":"data.aws_wafv2_web_acl.existing","mode":"data","type":"aws_wafv2_web_acl","name":"existing","provider_config_key":"aws","expressions":{"name":{"references":["var.project_name","var.env"]},"scope":{"constant_value":"REGIONAL"}},"schema_version":0,"count_expression":{"references":["var.create_waf"]}}],"variables":{"additional_tags":{"default":{},"description":"Additional tags to apply to all resources"},"alb_access_logs_bucket":{"default":"","description":"S3 bucket for ALB access logs (optional - will create if not provided)"},"allowed_http_cidrs":{"default":["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16"],"description":"CIDR blocks allowed to access ALB on HTTP/HTTPS - restrict to specific IPs/ranges for security"},"application":{"default":"Web Server Deployment","description":"Application name for resource tagging"},"availability_zones":{"default":[],"description":"List of availability zones"},"aws_region":{"default":"us-east-1","description":"AWS region for deployment"},"az_count":{"default":2,"description":"Number of availability zones to use"},"backup_retention_days":{"default":7,"description":"Number of days to retain backups"},"budget_alert_emails":{"default":["shublaisengwa@gmail.com"],"description":"List of email addresses to receive budget alerts"},"budget_limit":{"default":100,"description":"Budget limit in USD"},"cidr_block":{"default":"10.0.0.0/16","description":"VPC CIDR block"},"cloudwatch_billing_threshold":{"default":80,"description":"CloudWatch billing alarm threshold in USD"},"cloudwatch_log_retention_days":{"default":14,"description":"CloudWatch log retention period in days"},"cost_anomaly_threshold":{"default":20,"description":"Cost anomaly detection threshold in USD"},"cost_center":{"default":"devops","description":"Cost center for resource tagging"},"create_alb":{"default":true,"description":"Create Application Load Balancer"},"create_instances":{"default":true,"description":"Create EC2 instances"},"create_patch_baseline":{"default":true,"description":"Create SSM Patch Baseline and Patch Group"},"create_vpc":{"default":true,"description":"Create VPC and networking resources"},"create_waf":{"default":true,"description":"Create WAF Web ACL"},"enable_alb_access_logs":{"default":true,"description":"Enable ALB access logging"},"enable_alb_deletion_protection":{"default":true,"description":"Enable deletion protection for ALB (recommended for production)"},"enable_cloudwatch_billing_alarms":{"default":true,"description":"Enable CloudWatch billing alarms for estimated charges"},"enable_cost_anomaly_detection":{"default":false,"description":"Enable AWS Cost Anomaly Detection"},"enable_cost_monitoring":{"default":true,"description":"Enable AWS Budgets and cost monitoring features"},"enable_detailed_monitoring":{"default":false,"description":"Enable detailed CloudWatch monitoring for EC2 instances"},"enable_enhanced_monitoring":{"default":false,"description":"Enable enhanced monitoring"},"enable_preview":{"default":false,"description":"Enable preview environment features"},"enable_sns_cost_alerts":{"default":false,"description":"Enable SNS topic for cost alerts (alternative to direct email)"},"env":{"description":"Environment identifier (test/staging/prod/preview)"},"instance_count":{"default":2,"description":"Number of EC2 instances to launch"},"instance_type":{"default":"t3.micro","description":"EC2 instance type"},"kms_key_id":{"default":null,"description":"KMS key ID for EBS encryption (optional)"},"log_retention_days":{"default":14,"description":"Log retention period in days"},"monthly_budget_limit":{"default":100,"description":"Monthly budget limit in USD for cost monitoring"},"owner":{"default":"DevOps Team","description":"Owner of the resources"},"patch_schedule":{"default":"cron(0 2 ? * SUN *)","description":"Cron expression for patch schedule (UTC)"},"project_name":{"description":"Name of the project used for resource naming"},"sns_email_endpoints":{"default":[],"description":"List of email addresses for SNS notifications"},"ssl_certificate_arn":{"default":"","description":"ARN of SSL certificate for HTTPS listener (required for HTTPS)"},"vpc_cidr":{"default":"10.0.0.0/16","description":"VPC CIDR block"},"waf_rate_limit":{"default":2000,"description":"WAF rate limit (requests per 5 minutes)"}}}},"relevant_attributes":[{"resource":"aws_cloudwatch_metric_alarm.ec2_high_cpu","attribute":[]},{"resource":"aws_lb_target_group.main[0]","attribute":["arn_suffix"]},{"resource":"data.aws_ssm_patch_baseline.existing[0]","attribute":["id"]},{"resource":"aws_security_group.ec2","attribute":["id"]},{"resource":"aws_sns_topic.infrastructure_alerts","attribute":["arn"]},{"resource":"data.aws_wafv2_web_acl.existing[0]","attribute":["arn"]},{"resource":"aws_budgets_budget.monthly_cost_budget[0]","attribute":["name"]},{"resource":"data.aws_lb_target_group.existing[0]","attribute":["arn_suffix"]},{"resource":"data.aws_vpc.existing[0]","attribute":["id"]},{"resource":"aws_vpc.main[0]","attribute":["cidr_block"]},{"resource":"aws_cloudwatch_log_group.waf_log_group","attribute":["arn"]},{"resource":"aws_s3_bucket.patch_logs","attribute":["bucket"]},{"resource":"aws_cloudwatch_metric_alarm.alb_5xx_errors","attribute":["alarm_name"]},{"resource":"data.aws_subnets.existing[0]","attribute":["ids"]},{"resource":"data.aws_lb.existing[0]","attribute":["arn"]},{"resource":"aws_cloudwatch_metric_alarm.patch_compliance_failure","attribute":["alarm_name"]},{"resource":"aws_lb.main[0]","attribute":["dns_name"]},{"resource":"data.aws_elb_service_account.main","attribute":["id"]},{"resource":"aws_security_group.alb","attribute":["id"]},{"resource":"aws_sns_topic.cost_alerts[0]","attribute":["arn"]},{"resource":"aws_ssm_patch_baseline.amazon_linux[0]","attribute":["id"]},{"resource":"aws_eip.nat","attribute":[]},{"resource":"data.aws_ami.amazon_linux","attribute":["id"]},{"resource":"aws_lb.main[0]","attribute":["arn_suffix"]},{"resource":"aws_cloudwatch_metric_alarm.ec2_status_check_failed","attribute":[]},{"resource":"aws_lb_target_group.main[0]","attribute":["arn"]},{"resource":"aws_s3_bucket.patch_logs","attribute":["arn"]},{"resource":"data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"aws_iam_role.ec2_role","attribute":["id"]},{"resource":"data.aws_lb.existing[0]","attribute":["arn_suffix"]},{"resource":"aws_kms_key.waf_logs","attribute":["key_id"]},{"resource":"data.aws_lb.existing[0]","attribute":["zone_id"]},{"resource":"aws_s3_bucket.alb_access_logs[0]","attribute":["arn"]},{"resource":"aws_nat_gateway.main","attribute":[]},{"resource":"aws_s3_bucket.alb_access_logs[0]","attribute":["id"]},{"resource":"random_id.bucket_suffix","attribute":["hex"]},{"resource":"data.aws_subnets.existing_private[0]","attribute":["ids"]},{"resource":"aws_subnet.private","attribute":[]},{"resource":"aws_instance.main","attribute":[]},{"resource":"data.aws_lb.existing[0]","attribute":["dns_name"]},{"resource":"aws_cloudwatch_dashboard.infrastructure","attribute":["dashboard_name"]},{"resource":"aws_iam_instance_profile.ec2_profile","attribute":["name"]},{"resource":"aws_lb.main[0]","attribute":["arn"]},{"resource":"aws_route_table.private","attribute":[]},{"resource":"aws_iam_role.ec2_role","attribute":["name"]},{"resource":"aws_s3_bucket.alb_access_logs[0]","attribute":["bucket"]},{"resource":"data.aws_availability_zones.available","attribute":["names"]},{"resource":"aws_s3_bucket.patch_logs","attribute":["id"]},{"resource":"aws_route_table.public[0]","attribute":["id"]},{"resource":"data.aws_vpc.existing[0]","attribute":["cidr_block"]},{"resource":"aws_cloudwatch_metric_alarm.alb_unhealthy_targets","attribute":["alarm_name"]},{"resource":"aws_security_group.vpc_endpoints[0]","attribute":["id"]},{"resource":"aws_subnet.public","attribute":[]},{"resource":"aws_internet_gateway.main[0]","attribute":["id"]},{"resource":"aws_lb.main[0]","attribute":["zone_id"]},{"resource":"aws_wafv2_web_acl.main[0]","attribute":["arn"]},{"resource":"aws_iam_policy.ec2_cloudwatch_custom","attribute":["arn"]},{"resource":"aws_vpc.main[0]","attribute":["id"]},{"resource":"aws_kms_key.waf_logs","attribute":["arn"]}],"checks":[{"address":{"kind":"var","name":"allowed_http_cidrs","to_display":"var.allowed_http_cidrs"},"status":"pass","instances":[{"address":{"to_display":"var.allowed_http_cidrs"},"status":"pass"}]},{"address":{"kind":"var","name":"az_count","to_display":"var.az_count"},"status":"pass","instances":[{"address":{"to_display":"var.az_count"},"status":"pass"}]},{"address":{"kind":"var","name":"backup_retention_days","to_display":"var.backup_retention_days"},"status":"pass","instances":[{"address":{"to_display":"var.backup_retention_days"},"status":"pass"}]},{"address":{"kind":"var","name":"budget_alert_emails","to_display":"var.budget_alert_emails"},"status":"pass","instances":[{"address":{"to_display":"var.budget_alert_emails"},"status":"pass"}]},{"address":{"kind":"var","name":"cidr_block","to_display":"var.cidr_block"},"status":"pass","instances":[{"address":{"to_display":"var.cidr_block"},"status":"pass"}]},{"address":{"kind":"var","name":"cloudwatch_billing_threshold","to_display":"var.cloudwatch_billing_threshold"},"status":"pass","instances":[{"address":{"to_display":"var.cloudwatch_billing_threshold"},"status":"pass"}]},{"address":{"kind":"var","name":"cloudwatch_log_retention_days","to_display":"var.cloudwatch_log_retention_days"},"status":"pass","instances":[{"address":{"to_display":"var.cloudwatch_log_retention_days"},"status":"pass"}]},{"address":{"kind":"var","name":"cost_anomaly_threshold","to_display":"var.cost_anomaly_threshold"},"status":"pass","instances":[{"address":{"to_display":"var.cost_anomaly_threshold"},"status":"pass"}]},{"address":{"kind":"var","name":"env","to_display":"var.env"},"status":"pass","instances":[{"address":{"to_display":"var.env"},"status":"pass"}]},{"address":{"kind":"var","name":"instance_count","to_display":"var.instance_count"},"status":"pass","instances":[{"address":{"to_display":"var.instance_count"},"status":"pass"}]},{"address":{"kind":"var","name":"instance_type","to_display":"var.instance_type"},"status":"pass","instances":[{"address":{"to_display":"var.instance_type"},"status":"pass"}]},{"address":{"kind":"var","name":"monthly_budget_limit","to_display":"var.monthly_budget_limit"},"status":"pass","instances":[{"address":{"to_display":"var.monthly_budget_limit"},"status":"pass"}]},{"address":{"kind":"var","name":"patch_schedule","to_display":"var.patch_schedule"},"status":"pass","instances":[{"address":{"to_display":"var.patch_schedule"},"status":"pass"}]},{"address":{"kind":"var","name":"project_name","to_display":"var.project_name"},"status":"pass","instances":[{"address":{"to_display":"var.project_name"},"status":"pass"}]},{"address":{"kind":"var","name":"sns_email_endpoints","to_display":"var.sns_email_endpoints"},"status":"pass","instances":[{"address":{"to_display":"var.sns_email_endpoints"},"status":"pass"}]},{"address":{"kind":"var","name":"waf_rate_limit","to_display":"var.waf_rate_limit"},"status":"pass","instances":[{"address":{"to_display":"var.waf_rate_limit"},"status":"pass"}]}],"timestamp":"2025-08-22T13:40:19Z","applyable":true,"complete":true,"errored":false}
